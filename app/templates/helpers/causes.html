<!-- If you add another macro to this file or significatly edit an existing one, 
dont' forget to add a description of your changes to the appropriate styleguide
section (app/templates/styleguide/templating#cause-helpers)
-->

{% macro render_cause_info(caption, info) %}
<p class="u-cf u-remove-margin-bottom">
    <strong>{{ caption }}</strong>
</p>
<h2>{{ info }}</h2>
{% endmacro %}

{% macro render_log(log) %}
{% from "helpers/users.html" import render_avatar %}
{% set captions={
    1: 'added a cause',
    2: 'edited a cause',
    3: 'supported a cause',
    4: 'reached cause milestone',
    5: 'added an action',
    6: 'supported an action',
    7: 'commented on action',
    8: 'added a post',
    9: 'posted a reply'
    }
%}
{% for event in log|reverse %}
<div class="feed-item">
    <small>{{ moment(event.logged_at).format('MMM Do, YYYY @ HH:mm') }}</small>
    <p>
        {{ render_avatar(event.user) }}&nbsp;
        {{ captions[event.event_type_id] }}:<br>
        {% if event.event_type_id in [1,2,3,4] %}
        <a class="feed-link"  href="{{ url_for('causes.cause_detail', slug=event.item.slug) }}">
            {{ event.item.title }}
        </a>
        {% elif event.event_type_id in [5,6,7] %}
        <a class="feed-link"  data-target="modal-action-{{ event.item.id }}">
            {{ event.item.title }}
        </a>
        {% elif event.event_type_id in [8,9] %}
        <a class="feed-link" href="{{ url_for('posts.post_detail', slug=event.item.cause.slug, pk=event.item.id) }}">
            {{ event.item.title }}
        </a>
        {% endif %}
    </p>
</div>
{% endfor %}
{% endmacro %}
